<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Điều khiển ESP8266 ON/OFF</title>
  <script src="https://unpkg.com/paho-mqtt/mqttws31.min.js"></script>
  <style>
    body { font-family: Arial; text-align:center; margin-top:50px; }
    h2 { color: #333; }
    button { font-size: 20px; padding:10px 30px; margin:10px; cursor:pointer; border:none; border-radius:5px; }
    #onBtn { background-color: #4CAF50; color:white; }
    #offBtn { background-color: #f44336; color:white; }
  </style>
</head>
<body>
  <h2>Điều khiển ESP8266 ON/OFF</h2>
  <button id="onBtn" onclick="sendON()">ON</button>
  <button id="offBtn" onclick="sendOFF()">OFF</button>

  <script>
    // Kết nối WebSocket tới Node-RED hoặc broker hỗ trợ WebSocket
    const client = new Paho.MQTT.Client("YOUR_NODE_RED_IP", 1880, "web_" + Math.floor(Math.random()*1000));
    client.connect({onSuccess:onConnect});
    const topic = "esp/web/control";

    function onConnect() { console.log("✅ Connected to MQTT WebSocket"); }
    function sendON() {
      const msg = new Paho.MQTT.Message("ON");
      msg.destinationName = topic;
      client.send(msg);
      console.log("Sent ON");
    }
    function sendOFF() {
      const msg = new Paho.MQTT.Message("OFF");
      msg.destinationName = topic;
      client.send(msg);
      console.log("Sent OFF");
    }
  </script>
</body>
</html>
